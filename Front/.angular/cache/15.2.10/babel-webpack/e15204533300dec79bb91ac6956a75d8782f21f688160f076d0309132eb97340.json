{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/producto.service\";\nimport * as i3 from \"src/app/services/local.service\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"src/app/services/compra.service\";\nimport * as i6 from \"src/app/services/detalle-compra.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"../navbar/navbar.component\";\nimport * as i10 from \"../store/ver-producto/ver-producto.component\";\nfunction ComprarProductoComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Vendido por la tienda: \", ctx_r0.localNombre, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"show\": a0\n  };\n};\nexport class ComprarProductoComponent {\n  constructor(aRoute, productoService, localService, router, _snackBar, compraService, detalleCompraService // Inyecta el servicio de DetalleCompraService\n  ) {\n    this.aRoute = aRoute;\n    this.productoService = productoService;\n    this.localService = localService;\n    this.router = router;\n    this._snackBar = _snackBar;\n    this.compraService = compraService;\n    this.detalleCompraService = detalleCompraService;\n    this.localNombre = '';\n    this.cantidadSeleccionada = 1;\n    this.precioUnitario = 0;\n    this.subtotal = 0;\n    this.localId = -1; // Inicializar localId con un valor predeterminado\n    this.showDropdown = false;\n  }\n  ngOnInit() {\n    this.Id = Number(this.aRoute.snapshot.paramMap.get('id'));\n    this.productoService.getProducto(this.Id).subscribe(producto => {\n      if (producto.localId) {\n        this.localService.getLocal(producto.localId).subscribe(local => {\n          this.localNombre = local.nombreLo;\n          this.localId = local.id ?? -1;\n        });\n      }\n      this.precioUnitario = producto.precioVendido;\n    });\n  }\n  seleccionarCantidad(cantidad) {\n    this.cantidadSeleccionada = cantidad;\n    this.showDropdown = false; // cerrar la lista después de seleccionar un número\n  }\n\n  toggleDropdown() {\n    this.showDropdown = !this.showDropdown;\n  }\n  agregarAlCarrito() {\n    const userId = localStorage.getItem('userId');\n    if (!userId) {\n      console.error('El usuario no ha iniciado sesión.');\n      return;\n    }\n    const detalleCompra = {\n      productoId: this.Id,\n      cantidad: this.cantidadSeleccionada,\n      precioUnitario: this.precioUnitario,\n      localId: this.localId,\n      compradorId: userId,\n      subtotal: this.precioUnitario * this.cantidadSeleccionada\n    };\n    this.detalleCompraService.addDetalleCompra(detalleCompra).subscribe(response => {\n      console.log('Producto agregado al carrito:', response);\n      this.mensajeExito();\n    }, error => {\n      console.error('Error al agregar producto al carrito:', error);\n    });\n  }\n  mensajeExito() {\n    this._snackBar.open(`El producto fue añadido al carrito con éxito`, '', {\n      duration: 4000,\n      horizontalPosition: 'right'\n    });\n  }\n  comprarProducto() {\n    // Aquí podrías implementar la lógica para comprar el producto directamente en lugar de agregarlo al carrito\n  }\n  static #_ = this.ɵfac = function ComprarProductoComponent_Factory(t) {\n    return new (t || ComprarProductoComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductoService), i0.ɵɵdirectiveInject(i3.LocalService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.MatSnackBar), i0.ɵɵdirectiveInject(i5.CompraService), i0.ɵɵdirectiveInject(i6.DetalleCompraService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ComprarProductoComponent,\n    selectors: [[\"app-comprar-producto\"]],\n    decls: 35,\n    vars: 6,\n    consts: [[1, \"dash\"], [1, \"main-and-sidebar\"], [1, \"main\"], [3, \"id\"], [1, \"sidebar\"], [1, \"dropdown\"], [1, \"dropbtn\", 3, \"click\"], [1, \"selected-quantity\", \"elegant-frame\"], [1, \"dropdown-content\", 3, \"ngClass\"], [1, \"number-list\"], [\"href\", \"javascript:void(0);\", 3, \"click\"], [1, \"button-container\"], [\"mat-raised-button\", \"\", \"color\", \"accent\"], [\"mat-stroked-button\", \"\", \"color\", \"accent\", 3, \"click\"], [4, \"ngIf\"]],\n    template: function ComprarProductoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0);\n        i0.ɵɵelement(2, \"app-navbar\");\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"main\", 2);\n        i0.ɵɵelement(5, \"app-ver-producto\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5)(8, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_button_click_8_listener() {\n          return ctx.toggleDropdown();\n        });\n        i0.ɵɵtext(9, \"Cantidad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 8)(13, \"ul\", 9)(14, \"li\")(15, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_a_click_15_listener() {\n          return ctx.seleccionarCantidad(1);\n        });\n        i0.ɵɵtext(16, \"1\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"li\")(18, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_a_click_18_listener() {\n          return ctx.seleccionarCantidad(2);\n        });\n        i0.ɵɵtext(19, \"2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"li\")(21, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_a_click_21_listener() {\n          return ctx.seleccionarCantidad(3);\n        });\n        i0.ɵɵtext(22, \"3\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"li\")(24, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_a_click_24_listener() {\n          return ctx.seleccionarCantidad(4);\n        });\n        i0.ɵɵtext(25, \"4\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"li\")(27, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_a_click_27_listener() {\n          return ctx.seleccionarCantidad(5);\n        });\n        i0.ɵɵtext(28, \"5\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(29, \"div\", 11)(30, \"button\", 12);\n        i0.ɵɵtext(31, \"Comprar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function ComprarProductoComponent_Template_button_click_32_listener() {\n          return ctx.agregarAlCarrito();\n        });\n        i0.ɵɵtext(33, \"Agregar al carrito\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(34, ComprarProductoComponent_div_34_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"id\", ctx.Id);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.cantidadSeleccionada);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, ctx.showDropdown));\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"ngIf\", ctx.localNombre);\n      }\n    },\n    dependencies: [i7.NgClass, i7.NgIf, i8.MatButton, i9.NavbarComponent, i10.VerProductoComponent],\n    styles: [\".dash[_ngcontent-%COMP%] {\\r\\n    display: flex; \\r\\n    flex-direction: column; \\r\\n  }\\r\\n  \\r\\n  .main-and-sidebar[_ngcontent-%COMP%] {\\r\\n    display: flex; \\r\\n    flex: 1; \\r\\n  }\\r\\n  \\r\\n  .sidebar[_ngcontent-%COMP%] {\\r\\n    order: 2;\\r\\n    flex: 0 0 300px;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 4px;\\r\\n    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);\\r\\n    padding: 20px;\\r\\n  }\\r\\n  \\r\\n  .dropdown[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    display: inline-block;\\r\\n  }\\r\\n  \\r\\n  .dropbtn[_ngcontent-%COMP%] {\\r\\n    background-color: #4CAF50;\\r\\n    color: white;\\r\\n    padding: 10px;\\r\\n    font-size: 16px;\\r\\n    border: none;\\r\\n  }\\r\\n  \\r\\n  .dropdown-content[_ngcontent-%COMP%] {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    background-color: #f9f9f9;\\r\\n    min-width: 160px;\\r\\n    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\\r\\n    z-index: 1;\\r\\n  }\\r\\n  \\r\\n  .dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n    color: black;\\r\\n    padding: 12px 16px;\\r\\n    text-decoration: none;\\r\\n    display: block;\\r\\n  }\\r\\n  \\r\\n  .dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #f1f1f1;\\r\\n  }\\r\\n  \\r\\n  .dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%] {\\r\\n    display: block;\\r\\n  }\\r\\n  \\r\\n  .number-list[_ngcontent-%COMP%] {\\r\\n    list-style: none;\\r\\n    padding: 0;\\r\\n  }\\r\\n  \\r\\n  .number-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 10px;\\r\\n  }\\r\\n  \\r\\n  .button-container[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n    display: flex;\\r\\n    flex-direction: column; \\r\\n  }\\r\\n  .show[_ngcontent-%COMP%] {\\r\\n    display: block !important;\\r\\n  }\\r\\n  .elegant-frame[_ngcontent-%COMP%] {\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 4px;\\r\\n    padding: 5px 10px;\\r\\n    margin-left: 10px;\\r\\n  }\\r\\n  \\r\\n  .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 10px; \\r\\n  }\\r\\n  \\r\\n  .main[_ngcontent-%COMP%] {\\r\\n    order: 1; \\r\\n    flex: 1;\\r\\n    margin-top: 20px;\\r\\n    margin-left: 20px;\\r\\n    margin-right: 20px;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jb21wcmFyLXByb2R1Y3RvL2NvbXByYXItcHJvZHVjdG8uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWEsRUFBRSw0REFBNEQ7SUFDM0Usc0JBQXNCLEVBQUUsdUNBQXVDO0VBQ2pFOztFQUVBO0lBQ0UsYUFBYSxFQUFFLDREQUE0RDtJQUMzRSxPQUFPLEVBQUUsMkRBQTJEO0VBQ3RFOztFQUVBO0lBQ0UsUUFBUTtJQUNSLGVBQWU7SUFDZixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLDBDQUEwQztJQUMxQyxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIscUJBQXFCO0VBQ3ZCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixhQUFhO0lBQ2IsZUFBZTtJQUNmLFlBQVk7RUFDZDs7RUFFQTtJQUNFLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIseUJBQXlCO0lBQ3pCLGdCQUFnQjtJQUNoQiwrQ0FBK0M7SUFDL0MsVUFBVTtFQUNaOztFQUVBO0lBQ0UsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixxQkFBcUI7SUFDckIsY0FBYztFQUNoQjs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLGNBQWM7RUFDaEI7O0VBRUE7SUFDRSxnQkFBZ0I7SUFDaEIsVUFBVTtFQUNaOztFQUVBO0lBQ0UsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGFBQWE7SUFDYixzQkFBc0IsRUFBRSx1Q0FBdUM7RUFDakU7RUFDQTtJQUNFLHlCQUF5QjtFQUMzQjtFQUNBO0lBQ0Usc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixpQkFBaUI7SUFDakIsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsbUJBQW1CLEVBQUUsZ0NBQWdDO0VBQ3ZEOztFQUVBO0lBQ0UsUUFBUSxFQUFFLHdDQUF3QztJQUNsRCxPQUFPO0lBQ1AsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixrQkFBa0I7RUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIuZGFzaCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4OyAvKiBIYWNlciBxdWUgbG9zIGVsZW1lbnRvcyBoaWpvcyBzZSBjb21wb3J0ZW4gY29tbyBmbGV4Ym94ICovXHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAvKiBBcGlsYXIgbG9zIGVsZW1lbnRvcyB2ZXJ0aWNhbG1lbnRlICovXHJcbiAgfVxyXG4gIFxyXG4gIC5tYWluLWFuZC1zaWRlYmFyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7IC8qIEhhY2VyIHF1ZSBsb3MgZWxlbWVudG9zIGhpam9zIHNlIGNvbXBvcnRlbiBjb21vIGZsZXhib3ggKi9cclxuICAgIGZsZXg6IDE7IC8qIEVsIGN1ZXJwbyB5IGVsIHNpZGViYXIgY29tcGFydGlyw4PCoW4gZWwgZXNwYWNpbyByZXN0YW50ZSAqL1xyXG4gIH1cclxuICBcclxuICAuc2lkZWJhciB7XHJcbiAgICBvcmRlcjogMjtcclxuICAgIGZsZXg6IDAgMCAzMDBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMnB4IDVweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgICBwYWRkaW5nOiAyMHB4O1xyXG4gIH1cclxuICBcclxuICAuZHJvcGRvd24ge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIH1cclxuICBcclxuICAuZHJvcGJ0biB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICB9XHJcbiAgXHJcbiAgLmRyb3Bkb3duLWNvbnRlbnQge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XHJcbiAgICBtaW4td2lkdGg6IDE2MHB4O1xyXG4gICAgYm94LXNoYWRvdzogMHB4IDhweCAxNnB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbiAgICB6LWluZGV4OiAxO1xyXG4gIH1cclxuICBcclxuICAuZHJvcGRvd24tY29udGVudCBhIHtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIHBhZGRpbmc6IDEycHggMTZweDtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gIH1cclxuICBcclxuICAuZHJvcGRvd24tY29udGVudCBhOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7XHJcbiAgfVxyXG4gIFxyXG4gIC5kcm9wZG93bjpob3ZlciAuZHJvcGRvd24tY29udGVudCB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICB9XHJcbiAgXHJcbiAgLm51bWJlci1saXN0IHtcclxuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gIH1cclxuICBcclxuICAubnVtYmVyLWxpc3QgbGkge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgLmJ1dHRvbi1jb250YWluZXIge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAvKiBBcGlsYXIgbG9zIGVsZW1lbnRvcyB2ZXJ0aWNhbG1lbnRlICovXHJcbiAgfVxyXG4gIC5zaG93IHtcclxuICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG4gIC5lbGVnYW50LWZyYW1lIHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBwYWRkaW5nOiA1cHggMTBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gIH1cclxuICBcclxuICAuYnV0dG9uLWNvbnRhaW5lciBidXR0b24ge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDsgLyogRXNwYWNpYWRvIGVudHJlIGxvcyBib3RvbmVzICovXHJcbiAgfVxyXG4gIFxyXG4gIC5tYWluIHtcclxuICAgIG9yZGVyOiAxOyAvKiBDb2xvY2FyIGVsIGN1ZXJwbyBhbnRlcyBkZWwgc2lkZWJhciAqL1xyXG4gICAgZmxleDogMTtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcclxuICAgIG1hcmdpbi1yaWdodDogMjBweDtcclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","ComprarProductoComponent","constructor","aRoute","productoService","localService","router","_snackBar","compraService","detalleCompraService","ngOnInit","Id","Number","snapshot","paramMap","get","getProducto","subscribe","producto","localId","getLocal","local","localNombre","nombreLo","id","precioUnitario","precioVendido","seleccionarCantidad","cantidad","cantidadSeleccionada","showDropdown","toggleDropdown","agregarAlCarrito","userId","localStorage","getItem","console","error","detalleCompra","productoId","compradorId","subtotal","addDetalleCompra","response","log","mensajeExito","open","duration","horizontalPosition","comprarProducto","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\54351\\Desktop\\Practica1\\Front\\src\\app\\components\\comprar-producto\\comprar-producto.component.html","C:\\Users\\54351\\Desktop\\Practica1\\Front\\src\\app\\components\\comprar-producto\\comprar-producto.component.ts"],"sourcesContent":["<body>\n  <div class=\"dash\">\n    <app-navbar></app-navbar>\n\n    <div class=\"main-and-sidebar\">\n      <!-- BODY -->\n      <main class=\"main\">\n        <app-ver-producto [id]=\"Id\"></app-ver-producto>\n      </main>\n\n      <!-- SIDEBAR -->\n      <div class=\"sidebar\">\n        <!-- Lista desplegable -->\n        <div class=\"dropdown\">\n          <button class=\"dropbtn\" (click)=\"toggleDropdown()\">Cantidad</button>\n          <div class=\"selected-quantity elegant-frame\">{{ cantidadSeleccionada }}</div>\n          <div class=\"dropdown-content\" [ngClass]=\"{'show': showDropdown}\">\n            <ul class=\"number-list\">\n              <li><a href=\"javascript:void(0);\" (click)=\"seleccionarCantidad(1)\">1</a></li>\n              <li><a href=\"javascript:void(0);\" (click)=\"seleccionarCantidad(2)\">2</a></li>\n              <li><a href=\"javascript:void(0);\" (click)=\"seleccionarCantidad(3)\">3</a></li>\n              <li><a href=\"javascript:void(0);\" (click)=\"seleccionarCantidad(4)\">4</a></li>\n              <li><a href=\"javascript:void(0);\" (click)=\"seleccionarCantidad(5)\">5</a></li>\n            </ul>\n          </div>\n        </div>\n        \n        <!-- Botones adicionales -->\n        <div class=\"button-container\">\n          <button mat-raised-button color=\"accent\" >Comprar</button>\n          <button mat-stroked-button color=\"accent\" (click)=\"agregarAlCarrito()\">Agregar al carrito</button>\n        </div>\n        <div *ngIf=\"localNombre\">\n          Vendido por la tienda: {{ localNombre }}\n        </div>\n      </div>\n    </div>\n  </div>\n</body>","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ProductoService } from 'src/app/services/producto.service';\nimport { LocalService } from 'src/app/services/local.service';\nimport { DetalleCompraService } from 'src/app/services/detalle-compra.service'; // Importa el servicio y la interfaz de DetalleCompra\nimport { CompraService } from 'src/app/services/compra.service';\nimport { DetalleCompra } from 'src/app/interfaces/detalle-compra';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Component({\n  selector: 'app-comprar-producto',\n  templateUrl: './comprar-producto.component.html',\n  styleUrls: ['./comprar-producto.component.css']\n})\nexport class ComprarProductoComponent implements OnInit {\n  Id!: number;\n  localNombre: string = '';\n  cantidadSeleccionada: number = 1;\n  precioUnitario: number = 0;\n  subtotal: number = 0;\n  localId: number = -1; // Inicializar localId con un valor predeterminado\n  showDropdown: boolean = false;\n\n  constructor(\n    private aRoute: ActivatedRoute,\n    private productoService: ProductoService,\n    private localService: LocalService,\n    private router: Router,\n    private _snackBar: MatSnackBar,\n\n    private compraService: CompraService,\n    private detalleCompraService: DetalleCompraService // Inyecta el servicio de DetalleCompraService\n  ) {}\n\n  ngOnInit() {\n    this.Id = Number(this.aRoute.snapshot.paramMap.get('id'));\n    this.productoService.getProducto(this.Id).subscribe(producto => {\n      if (producto.localId) {\n        this.localService.getLocal(producto.localId).subscribe(local => {\n          this.localNombre = local.nombreLo;\n          this.localId = local.id ?? -1;\n        });\n      }\n      this.precioUnitario = producto.precioVendido;\n    });\n  }\n  seleccionarCantidad(cantidad: number) {\n    this.cantidadSeleccionada = cantidad;\n    this.showDropdown = false; // cerrar la lista después de seleccionar un número\n  }\n  toggleDropdown() {\n    this.showDropdown = !this.showDropdown;\n  }\n\n  agregarAlCarrito() {\n    const userId = localStorage.getItem('userId');\n    if (!userId) {\n      console.error('El usuario no ha iniciado sesión.');\n      return;\n    }\n  \n    const detalleCompra: DetalleCompra = {\n      productoId: this.Id,\n      cantidad: this.cantidadSeleccionada,\n      precioUnitario: this.precioUnitario,\n      localId: this.localId,\n      compradorId: userId,\n      subtotal: this.precioUnitario * this.cantidadSeleccionada\n    };\n  \n    this.detalleCompraService.addDetalleCompra(detalleCompra).subscribe(\n      response => {\n        console.log('Producto agregado al carrito:', response);\n        this.mensajeExito();\n      },\n      error => {\n        console.error('Error al agregar producto al carrito:', error);\n      }\n    );\n  }\n  \n  mensajeExito() {\n    this._snackBar.open(`El producto fue añadido al carrito con éxito`,'', {\n      duration: 4000,\n      horizontalPosition: 'right',\n    });\n  }\n  comprarProducto() {\n    // Aquí podrías implementar la lógica para comprar el producto directamente en lugar de agregarlo al carrito\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}