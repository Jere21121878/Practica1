{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/detalle-compra.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"src/app/services/authentication.service\";\nimport * as i5 from \"src/app/services/foto.service\";\nimport * as i6 from \"src/app/services/compra.service\";\nimport * as i7 from \"src/app/services/producto.service\";\nfunction CarroComponent_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \" Imagen \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarroComponent_td_10_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 29);\n  }\n  if (rf & 2) {\n    const element_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", element_r14.foto, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CarroComponent_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtemplate(1, CarroComponent_td_10_img_1_Template, 1, 1, \"img\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r14.foto);\n  }\n}\nfunction CarroComponent_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \" Nombre del Producto \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarroComponent_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r17.nombreProducto, \" \");\n  }\n}\nfunction CarroComponent_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \" Tienda \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarroComponent_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r18.tienda, \" \");\n  }\n}\nfunction CarroComponent_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \" Cantidad \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarroComponent_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r19.cantidad, \" \");\n  }\n}\nfunction CarroComponent_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \" Subtotal \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarroComponent_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r20.subtotal, \" \");\n  }\n}\nfunction CarroComponent_th_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 26);\n    i0.ɵɵtext(1, \" Acciones \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CarroComponent_td_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 27)(1, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function CarroComponent_td_25_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const element_r21 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.eliminarDetalle(element_r21.id));\n    });\n    i0.ɵɵtext(2, \"Eliminar\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CarroComponent_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 31);\n  }\n}\nfunction CarroComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 32);\n  }\n}\nexport class CarroComponent {\n  constructor(route, detalleCompraService, _snackBar, authService, fotoService, compraService, productoService) {\n    this.route = route;\n    this.detalleCompraService = detalleCompraService;\n    this._snackBar = _snackBar;\n    this.authService = authService;\n    this.fotoService = fotoService;\n    this.compraService = compraService;\n    this.productoService = productoService;\n    this.displayedColumns = ['imagen', 'nombreProducto', 'tienda', 'cantidadPro', 'subtotal', 'acciones'];\n    this.dataSource = new MatTableDataSource();\n    this.loading = false;\n    this.detalleCompraList = [];\n    this.compradorId = '';\n    this.fotos = {};\n    this.totalAPagar = 0;\n  }\n  ngOnInit() {\n    this.authService.isLoggedIn$.subscribe(loggedIn => {\n      if (loggedIn) {\n        const userData = JSON.parse(localStorage.getItem('userData') ?? '');\n        if (userData && userData.userId) {\n          this.compradorId = userData.userId;\n          this.obtenerDetalles();\n        } else {\n          console.error(\"No se encontró el ID del usuario en los datos del usuario almacenados en el localStorage.\");\n          // Aquí puedes manejar la situación en la que no se encuentra el ID del usuario\n        }\n      }\n    });\n  }\n\n  obtenerDetalles() {\n    this.authService.isLoggedIn$.subscribe(loggedIn => {\n      if (loggedIn) {\n        const userData = JSON.parse(localStorage.getItem('userData') ?? '');\n        this.compradorId = userData.userId ?? '';\n        this.detalleCompraService.getDetalleVentaByCompradorId(this.compradorId).subscribe(response => {\n          this.detalleCompraList = response.map(detalle => {\n            return {\n              ...detalle,\n              nombreProducto: detalle.producto?.nombrePro,\n              tienda: detalle.local?.nombreLo,\n              subtotal: detalle.precioUnitario * detalle.cantidad\n            };\n          });\n          // Obtener las fotos por productoId y asignarlas a cada detalle\n          this.detalleCompraList.forEach(detalle => {\n            this.fotoService.getFotosByProductoId(detalle.productoId).subscribe(fotos => {\n              if (fotos && fotos.length > 0) {\n                detalle.foto = 'data:image/jpeg;base64,' + fotos[0].data;\n              }\n            });\n          });\n          this.dataSource.data = this.detalleCompraList;\n        });\n      }\n    });\n  }\n  eliminarDetalle(Id) {\n    this.loading = true;\n    this.detalleCompraService.deleteDetalleCompra(Id).subscribe(() => {\n      this.mensajeExito();\n      this.loading = false;\n      this.obtenerDetalles();\n    });\n  }\n  mensajeExito() {\n    this._snackBar.open('Producto Eliminado Exitosamente', '', {\n      duration: 1500,\n      horizontalPosition: 'right'\n    });\n  }\n  ngAfterViewInit() {}\n  ejecutarCompra() {\n    const detallesCompra = this.dataSource.data;\n    const comprasPorLocalId = {};\n    detallesCompra.forEach(detalle => {\n      if (!(detalle.localId in comprasPorLocalId)) {\n        comprasPorLocalId[detalle.localId] = [];\n      }\n      comprasPorLocalId[detalle.localId].push(detalle);\n    });\n    Object.values(comprasPorLocalId).forEach(detallesPorLocal => {\n      const localId = detallesPorLocal[0].localId;\n      const compra = {\n        id: 0,\n        total: detallesPorLocal.reduce((total, detalle) => total + detalle.subtotal, 0),\n        fecha: new Date(),\n        localId: localId,\n        compradorId: this.compradorId,\n        detalles: detallesPorLocal\n      };\n      // Realizar la solicitud POST para ejecutar la compra\n      this.compraService.ejecutarCompra(compra).subscribe(() => {\n        // Una vez que la compra se haya ejecutado con éxito, eliminar los detalles de compra\n        detallesPorLocal.forEach(detalle => {\n          if (detalle.id !== undefined) {\n            // Verificar si el id es definido antes de llamar a eliminarDetalle()\n            this.eliminarDetalle(detalle.id);\n            // Restar la cantidad de detalleCompra a la cantidadPro del Producto\n            this.productoService.getProducto(+detalle.productoId).subscribe(producto => {\n              if (producto.id !== undefined) {\n                producto.cantidadPro -= detalle.cantidad;\n                this.productoService.updateProducto(producto.id, producto).subscribe(() => {\n                  console.log('Cantidad actualizada para el producto:', producto.nombrePro);\n                }, error => {\n                  console.error('Error al actualizar la cantidad del producto:', error);\n                });\n              } else {\n                console.error('El producto no tiene un ID definido.');\n              }\n            }, error => {\n              console.error('Error al obtener el producto:', error);\n            });\n          }\n        });\n        // Recargar la página después de eliminar los detalles de compra\n        window.location.reload();\n        // Manejar la respuesta o realizar alguna lógica adicional\n        // En este ejemplo, simplemente mostramos un mensaje de éxito\n        this.mostrarMensajeExito();\n      }, error => {\n        console.error('Error al ejecutar la compra:', error);\n        // Manejar errores\n      });\n    });\n  }\n\n  mostrarMensajeExito() {\n    this._snackBar.open('Compra realizada con éxito', '', {\n      duration: 2000,\n      horizontalPosition: 'right'\n    });\n  }\n  calcularTotal() {\n    this.totalAPagar = this.dataSource.data.reduce((total, detalle) => total + detalle.subtotal, 0);\n    return this.totalAPagar;\n  }\n  static #_ = this.ɵfac = function CarroComponent_Factory(t) {\n    return new (t || CarroComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.DetalleCompraService), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.AuthenticationService), i0.ɵɵdirectiveInject(i5.FotoService), i0.ɵɵdirectiveInject(i6.CompraService), i0.ɵɵdirectiveInject(i7.ProductoService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CarroComponent,\n    selectors: [[\"app-carro\"]],\n    decls: 64,\n    vars: 4,\n    consts: [[1, \"container\"], [1, \"row\", \"border-top\", \"border-bottom\"], [1, \"card\"], [1, \"card-body\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"imagen\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"nombreProducto\"], [\"matColumnDef\", \"tienda\"], [\"matColumnDef\", \"cantidadPro\"], [\"matColumnDef\", \"subtotal\"], [\"matColumnDef\", \"acciones\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [1, \"summary\"], [1, \"col-md-4\", \"summary\", 2, \"padding\", \"0\"], [1, \"row\", 2, \"margin\", \"0\"], [1, \"col\", 2, \"padding-left\", \"0\"], [2, \"margin\", \"0\"], [2, \"width\", \"100%\"], [1, \"text-muted\"], [1, \"row\", 2, \"border-top\", \"1px solid rgba(0,0,0,.1)\", \"padding\", \"2vh 0\", \"margin\", \"0\"], [1, \"col\"], [1, \"col\", \"text-right\"], [1, \"btn\", 2, \"width\", \"100%\", 3, \"click\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"alt\", \"Foto del producto\", 3, \"src\", 4, \"ngIf\"], [\"alt\", \"Foto del producto\", 3, \"src\"], [3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function CarroComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\");\n        i0.ɵɵelement(1, \"app-navbar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"div\")(5, \"div\", 2)(6, \"div\", 3)(7, \"table\", 4);\n        i0.ɵɵelementContainerStart(8, 5);\n        i0.ɵɵtemplate(9, CarroComponent_th_9_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(10, CarroComponent_td_10_Template, 2, 1, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(11, 8);\n        i0.ɵɵtemplate(12, CarroComponent_th_12_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(13, CarroComponent_td_13_Template, 2, 1, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(14, 9);\n        i0.ɵɵtemplate(15, CarroComponent_th_15_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(16, CarroComponent_td_16_Template, 2, 1, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(17, 10);\n        i0.ɵɵtemplate(18, CarroComponent_th_18_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(19, CarroComponent_td_19_Template, 2, 1, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(20, 11);\n        i0.ɵɵtemplate(21, CarroComponent_th_21_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(22, CarroComponent_td_22_Template, 2, 1, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(23, 12);\n        i0.ɵɵtemplate(24, CarroComponent_th_24_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(25, CarroComponent_td_25_Template, 3, 0, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(26, CarroComponent_tr_26_Template, 1, 0, \"tr\", 13);\n        i0.ɵɵtemplate(27, CarroComponent_tr_27_Template, 1, 0, \"tr\", 14);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(28, \"div\", 15)(29, \"div\", 16)(30, \"div\")(31, \"h2\")(32, \"b\");\n        i0.ɵɵtext(33, \"Ticket\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(34, \"hr\");\n        i0.ɵɵelementStart(35, \"div\", 17)(36, \"div\", 18);\n        i0.ɵɵtext(37, \"Contador Productos\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(38, \"form\", 19)(39, \"p\");\n        i0.ɵɵtext(40, \"Forma de retiro\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"select\", 20)(42, \"option\", 21);\n        i0.ɵɵtext(43, \"Retiro en Tienda fisica\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"option\", 21);\n        i0.ɵɵtext(45, \"Envio\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(46, \"p\");\n        i0.ɵɵtext(47, \"Cuotas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"select\", 20)(49, \"option\", 21);\n        i0.ɵɵtext(50, \"3\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"option\", 21);\n        i0.ɵɵtext(52, \"6\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"option\", 21);\n        i0.ɵɵtext(54, \"9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"option\", 21);\n        i0.ɵɵtext(56, \"12\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(57, \"div\", 22)(58, \"div\", 23);\n        i0.ɵɵtext(59, \"TOTAL A PAGAR\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"div\", 24);\n        i0.ɵɵtext(61);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(62, \"button\", 25);\n        i0.ɵɵlistener(\"click\", function CarroComponent_Template_button_click_62_listener() {\n          return ctx.ejecutarCompra();\n        });\n        i0.ɵɵtext(63, \"EJECUTAR COMPRA\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(34);\n        i0.ɵɵtextInterpolate1(\"\\u20AC \", ctx.calcularTotal(), \"\");\n      }\n    },\n    styles: [\"body[_ngcontent-%COMP%]{\\r\\n    background: #fffdfd;\\r\\n    min-height: 100vh;\\r\\n    vertical-align: middle;\\r\\n    display: flex;\\r\\n    font-family: sans-serif;\\r\\n    font-size: 0.8rem;\\r\\n    font-weight: bold;\\r\\n}\\r\\n.container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    max-width: 1200px; \\r\\n    width: 70%; \\r\\n    margin: 10vh auto; \\r\\n    padding: 20px; \\r\\n    border: 1px solid #ccc; \\r\\n    border-radius: 10px; \\r\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); \\r\\n    background-color: #fff; \\r\\n    font-family: sans-serif;\\r\\n    font-size: 0.8rem;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.title[_ngcontent-%COMP%]{\\r\\n    margin-bottom: 5vh;\\r\\n}\\r\\n\\r\\n@media(max-width:767px){\\r\\n    .card[_ngcontent-%COMP%]{\\r\\n        margin: 3vh auto;\\r\\n    }\\r\\n}\\r\\n.cart[_ngcontent-%COMP%]{\\r\\n    background-color: #f5efef;\\r\\n    padding: 4vh 5vh;\\r\\n    border-bottom-left-radius: 1rem;\\r\\n    border-top-left-radius: 1rem;\\r\\n}\\r\\n@media(max-width:767px){\\r\\n    .cart[_ngcontent-%COMP%]{\\r\\n        padding: 4vh;\\r\\n        border-bottom-left-radius: unset;\\r\\n        border-top-right-radius: 1rem;\\r\\n    }\\r\\n}\\r\\n.card[_ngcontent-%COMP%] {\\r\\n    width: 70%; \\r\\n    box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\r\\n    border: transparent;\\r\\n    background-color: rgb(243, 243, 249); \\r\\n}\\r\\n\\r\\n.summary[_ngcontent-%COMP%] {\\r\\n    width: 30%; \\r\\n    background-color: #626262;\\r\\n    color: rgb(236, 238, 232);\\r\\n    padding: 4vh;\\r\\n    display: flex; \\r\\n    flex-direction: column; \\r\\n    justify-content: space-between; \\r\\n}\\r\\n\\r\\n.total-price[_ngcontent-%COMP%] {\\r\\n    color: red; \\r\\n}\\r\\n@media(max-width:767px){\\r\\n    .summary[_ngcontent-%COMP%]{\\r\\n    border-top-right-radius: unset;\\r\\n    border-bottom-left-radius: 1rem;\\r\\n    }\\r\\n}\\r\\n.summary[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{\\r\\n    padding: 0;\\r\\n}\\r\\n.summary[_ngcontent-%COMP%]   .col-10[_ngcontent-%COMP%]\\r\\n{\\r\\n    padding: 0;\\r\\n}.row[_ngcontent-%COMP%]{\\r\\n    margin: 0;\\r\\n}\\r\\n.title[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{\\r\\n    font-size: 1.5rem;\\r\\n}\\r\\n.main[_ngcontent-%COMP%]{\\r\\n    margin: 0;\\r\\n    padding: 2vh 0;\\r\\n    width: 100%;\\r\\n}\\r\\n.col-2[_ngcontent-%COMP%], .col[_ngcontent-%COMP%]{\\r\\n    padding: 0 1vh;\\r\\n}\\r\\na[_ngcontent-%COMP%]{\\r\\n    padding: 0 1vh;\\r\\n}\\r\\n.close[_ngcontent-%COMP%]{\\r\\n    margin-left: auto;\\r\\n    font-size: 0.7rem;\\r\\n}\\r\\nimg[_ngcontent-%COMP%]{\\r\\n    width: 3.5rem;\\r\\n}\\r\\n.back-to-shop[_ngcontent-%COMP%]{\\r\\n    margin-top: 4.5rem;\\r\\n}\\r\\nh5[_ngcontent-%COMP%]{\\r\\n    margin-top: 4vh;\\r\\n}\\r\\nhr[_ngcontent-%COMP%]{\\r\\n    margin-top: 1.25rem;\\r\\n}\\r\\nform[_ngcontent-%COMP%]{\\r\\n    padding: 2vh 0;\\r\\n}\\r\\nselect[_ngcontent-%COMP%]{\\r\\n    border: 1px solid rgba(0, 0, 0, 0.137);\\r\\n    padding: 1.5vh 1vh;\\r\\n    margin-bottom: 4vh;\\r\\n    outline: none;\\r\\n    width: 100%;\\r\\n    background-color: rgb(247, 247, 247);\\r\\n}\\r\\ninput[_ngcontent-%COMP%]{\\r\\n    border: 1px solid rgba(0, 0, 0, 0.137);\\r\\n    padding: 1vh;\\r\\n    margin-bottom: 4vh;\\r\\n    outline: none;\\r\\n    width: 100%;\\r\\n    background-color: rgb(247, 247, 247);\\r\\n}\\r\\ninput[_ngcontent-%COMP%]:focus::-webkit-input-placeholder\\r\\n{\\r\\n      color:transparent;\\r\\n}\\r\\n.btn[_ngcontent-%COMP%]{\\r\\n    background-color: #000;\\r\\n    border-color: #000;\\r\\n    color: white;\\r\\n    width: 100%;\\r\\n    font-size: 0.7rem;\\r\\n    margin-top: 4vh;\\r\\n    padding: 1vh;\\r\\n    border-radius: 0;\\r\\n}\\r\\n.btn[_ngcontent-%COMP%]:focus{\\r\\n    box-shadow: none;\\r\\n    outline: none;\\r\\n    box-shadow: none;\\r\\n    color: white;\\r\\n    -webkit-box-shadow: none;\\r\\n    -webkit-user-select: none;\\r\\n    transition: none; \\r\\n}\\r\\n.btn[_ngcontent-%COMP%]:hover{\\r\\n    color: white;\\r\\n}\\r\\na[_ngcontent-%COMP%]{\\r\\n    color: black; \\r\\n}\\r\\na[_ngcontent-%COMP%]:hover{\\r\\n    color: black;\\r\\n    text-decoration: none;\\r\\n}\\r\\n #code[_ngcontent-%COMP%]{\\r\\n    background-image: linear-gradient(to left, rgba(255, 255, 255, 0.253) , rgba(255, 255, 255, 0.185)), url(\\\"https://img.icons8.com/small/16/000000/long-arrow-right.png\\\");\\r\\n    background-repeat: no-repeat;\\r\\n    background-position-x: 95%;\\r\\n    background-position-y: center;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jYXJyby9jYXJyby5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixzQkFBc0I7SUFDdEIsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixpQkFBaUI7SUFDakIsaUJBQWlCO0FBQ3JCO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLGlCQUFpQixFQUFFLHlDQUF5QztJQUM1RCxVQUFVLEVBQUUseUJBQXlCO0lBQ3JDLGlCQUFpQixFQUFFLCtFQUErRTtJQUNsRyxhQUFhLEVBQUUsZ0VBQWdFO0lBQy9FLHNCQUFzQixFQUFFLG9CQUFvQjtJQUM1QyxtQkFBbUIsRUFBRSw4QkFBOEI7SUFDbkQsdUNBQXVDLEVBQUUsOEJBQThCO0lBQ3ZFLHNCQUFzQixFQUFFLGtEQUFrRDtJQUMxRSx1QkFBdUI7SUFDdkIsaUJBQWlCO0lBQ2pCLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJO1FBQ0ksZ0JBQWdCO0lBQ3BCO0FBQ0o7QUFDQTtJQUNJLHlCQUF5QjtJQUN6QixnQkFBZ0I7SUFDaEIsK0JBQStCO0lBQy9CLDRCQUE0QjtBQUNoQztBQUNBO0lBQ0k7UUFDSSxZQUFZO1FBQ1osZ0NBQWdDO1FBQ2hDLDZCQUE2QjtJQUNqQztBQUNKO0FBQ0E7SUFDSSxVQUFVLEVBQUUseUNBQXlDO0lBQ3JELDRDQUE0QztJQUM1QyxtQkFBbUI7SUFDbkIsb0NBQW9DLEVBQUUsa0RBQWtEO0FBQzVGOztBQUVBO0lBQ0ksVUFBVSxFQUFFLHlDQUF5QztJQUNyRCx5QkFBeUI7SUFDekIseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixhQUFhLEVBQUUsaUVBQWlFO0lBQ2hGLHNCQUFzQixFQUFFLG9DQUFvQztJQUM1RCw4QkFBOEIsRUFBRSxxQ0FBcUM7QUFDekU7O0FBRUE7SUFDSSxVQUFVLEVBQUUsd0NBQXdDO0FBQ3hEO0FBQ0E7SUFDSTtJQUNBLDhCQUE4QjtJQUM5QiwrQkFBK0I7SUFDL0I7QUFDSjtBQUNBO0lBQ0ksVUFBVTtBQUNkO0FBQ0E7O0lBRUksVUFBVTtBQUNkLENBQUM7SUFDRyxTQUFTO0FBQ2I7QUFDQTtJQUNJLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0ksU0FBUztJQUNULGNBQWM7SUFDZCxXQUFXO0FBQ2Y7QUFDQTtJQUNJLGNBQWM7QUFDbEI7QUFDQTtJQUNJLGNBQWM7QUFDbEI7QUFDQTtJQUNJLGlCQUFpQjtJQUNqQixpQkFBaUI7QUFDckI7QUFDQTtJQUNJLGFBQWE7QUFDakI7QUFDQTtJQUNJLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjtBQUNBO0lBQ0ksbUJBQW1CO0FBQ3ZCO0FBQ0E7SUFDSSxjQUFjO0FBQ2xCO0FBQ0E7SUFDSSxzQ0FBc0M7SUFDdEMsa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixhQUFhO0lBQ2IsV0FBVztJQUNYLG9DQUFvQztBQUN4QztBQUNBO0lBQ0ksc0NBQXNDO0lBQ3RDLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsYUFBYTtJQUNiLFdBQVc7SUFDWCxvQ0FBb0M7QUFDeEM7QUFDQTs7TUFFTSxpQkFBaUI7QUFDdkI7QUFDQTtJQUNJLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLFdBQVc7SUFDWCxpQkFBaUI7SUFDakIsZUFBZTtJQUNmLFlBQVk7SUFDWixnQkFBZ0I7QUFDcEI7QUFDQTtJQUNJLGdCQUFnQjtJQUNoQixhQUFhO0lBQ2IsZ0JBQWdCO0lBQ2hCLFlBQVk7SUFDWix3QkFBd0I7SUFDeEIseUJBQXlCO0lBQ3pCLGdCQUFnQjtBQUNwQjtBQUNBO0lBQ0ksWUFBWTtBQUNoQjtBQUNBO0lBQ0ksWUFBWTtBQUNoQjtBQUNBO0lBQ0ksWUFBWTtJQUNaLHFCQUFxQjtBQUN6QjtDQUNDO0lBQ0csdUtBQXVLO0lBQ3ZLLDRCQUE0QjtJQUM1QiwwQkFBMEI7SUFDMUIsNkJBQTZCO0FBQ2pDIiwic291cmNlc0NvbnRlbnQiOlsiYm9keXtcclxuICAgIGJhY2tncm91bmQ6ICNmZmZkZmQ7XHJcbiAgICBtaW4taGVpZ2h0OiAxMDB2aDtcclxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XHJcbiAgICBmb250LXNpemU6IDAuOHJlbTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5jb250YWluZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIG1heC13aWR0aDogMTIwMHB4OyAvKiBhanVzdGEgZWwgdmFsb3Igc2Vnw4PCum4gdHUgcHJlZmVyZW5jaWEgKi9cclxuICAgIHdpZHRoOiA3MCU7IC8qIEFuY2hvIGRlbCBjb250ZW5lZG9yICovXHJcbiAgICBtYXJnaW46IDEwdmggYXV0bzsgLyogQ2VudHJhIGVsIGNvbnRlbmVkb3IgaG9yaXpvbnRhbG1lbnRlIHkgYWdyZWdhIG3Dg8KhcmdlbmVzIHN1cGVyaW9yIGUgaW5mZXJpb3IgKi9cclxuICAgIHBhZGRpbmc6IDIwcHg7IC8qIEHDg8KxYWRlIHVuIHJlbGxlbm8gcGFyYSBxdWUgZWwgY29udGVuaWRvIG5vIHNlIHBlZ3VlIGFsIGJvcmRlICovXHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyAvKiBBZ3JlZ2EgdW4gYm9yZGUgKi9cclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7IC8qIEFncmVnYSBib3JkZXMgcmVkb25kZWFkb3MgKi9cclxuICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsgLyogQWdyZWdhIHVuIHN1YXZlIHNvbWJyZWFkbyAqL1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsgLyogQWp1c3RhIGVsIGNvbG9yIGRlIGZvbmRvIHNlZ8ODwrpuIHR1IHByZWZlcmVuY2lhICovXHJcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcclxuICAgIGZvbnQtc2l6ZTogMC44cmVtO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi50aXRsZXtcclxuICAgIG1hcmdpbi1ib3R0b206IDV2aDtcclxufVxyXG5cclxuQG1lZGlhKG1heC13aWR0aDo3NjdweCl7XHJcbiAgICAuY2FyZHtcclxuICAgICAgICBtYXJnaW46IDN2aCBhdXRvO1xyXG4gICAgfVxyXG59XHJcbi5jYXJ0e1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZWZlZjtcclxuICAgIHBhZGRpbmc6IDR2aCA1dmg7XHJcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAxcmVtO1xyXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMXJlbTtcclxufVxyXG5AbWVkaWEobWF4LXdpZHRoOjc2N3B4KXtcclxuICAgIC5jYXJ0e1xyXG4gICAgICAgIHBhZGRpbmc6IDR2aDtcclxuICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB1bnNldDtcclxuICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMXJlbTtcclxuICAgIH1cclxufVxyXG4uY2FyZCB7XHJcbiAgICB3aWR0aDogNzAlOyAvKiBhanVzdGEgZWwgdmFsb3Igc2Vnw4PCum4gdHUgcHJlZmVyZW5jaWEgKi9cclxuICAgIGJveC1zaGFkb3c6IDAgNnB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTkpO1xyXG4gICAgYm9yZGVyOiB0cmFuc3BhcmVudDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNDMsIDI0MywgMjQ5KTsgLyogYWp1c3RhIGVsIGNvbG9yIGRlIGZvbmRvIHNlZ8ODwrpuIHR1IHByZWZlcmVuY2lhICovXHJcbn1cclxuXHJcbi5zdW1tYXJ5IHtcclxuICAgIHdpZHRoOiAzMCU7IC8qIGFqdXN0YSBlbCB2YWxvciBzZWfDg8K6biB0dSBwcmVmZXJlbmNpYSAqL1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzYyNjI2MjtcclxuICAgIGNvbG9yOiByZ2IoMjM2LCAyMzgsIDIzMik7XHJcbiAgICBwYWRkaW5nOiA0dmg7XHJcbiAgICBkaXNwbGF5OiBmbGV4OyAvKiBBZ3JlZ2FyIGRpc3BsYXkgZmxleCBwYXJhIHF1ZSBlbCBjb250ZW5pZG8gb2N1cGUgdG9kbyBlbCBkaXYgKi9cclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IC8qIEFsaW5lYXIgZWwgY29udGVuaWRvIGVuIGNvbHVtbmEgKi9cclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgLyogRXNwYWNpbyB1bmlmb3JtZSBlbnRyZSBlbGVtZW50b3MgKi9cclxufVxyXG5cclxuLnRvdGFsLXByaWNlIHtcclxuICAgIGNvbG9yOiByZWQ7IC8qIENhbWJpYWRvIGVsIGNvbG9yIGRlbCBuw4PCum1lcm8gYSByb2pvICovXHJcbn1cclxuQG1lZGlhKG1heC13aWR0aDo3NjdweCl7XHJcbiAgICAuc3VtbWFyeXtcclxuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiB1bnNldDtcclxuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDFyZW07XHJcbiAgICB9XHJcbn1cclxuLnN1bW1hcnkgLmNvbC0ye1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG4uc3VtbWFyeSAuY29sLTEwXHJcbntcclxuICAgIHBhZGRpbmc6IDA7XHJcbn0ucm93e1xyXG4gICAgbWFyZ2luOiAwO1xyXG59XHJcbi50aXRsZSBie1xyXG4gICAgZm9udC1zaXplOiAxLjVyZW07XHJcbn1cclxuLm1haW57XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAydmggMDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5jb2wtMiwgLmNvbHtcclxuICAgIHBhZGRpbmc6IDAgMXZoO1xyXG59XHJcbmF7XHJcbiAgICBwYWRkaW5nOiAwIDF2aDtcclxufVxyXG4uY2xvc2V7XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIGZvbnQtc2l6ZTogMC43cmVtO1xyXG59XHJcbmltZ3tcclxuICAgIHdpZHRoOiAzLjVyZW07XHJcbn1cclxuLmJhY2stdG8tc2hvcHtcclxuICAgIG1hcmdpbi10b3A6IDQuNXJlbTtcclxufVxyXG5oNXtcclxuICAgIG1hcmdpbi10b3A6IDR2aDtcclxufVxyXG5ocntcclxuICAgIG1hcmdpbi10b3A6IDEuMjVyZW07XHJcbn1cclxuZm9ybXtcclxuICAgIHBhZGRpbmc6IDJ2aCAwO1xyXG59XHJcbnNlbGVjdHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xMzcpO1xyXG4gICAgcGFkZGluZzogMS41dmggMXZoO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogNHZoO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0NywgMjQ3LCAyNDcpO1xyXG59XHJcbmlucHV0e1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEzNyk7XHJcbiAgICBwYWRkaW5nOiAxdmg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA0dmg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQ3LCAyNDcsIDI0Nyk7XHJcbn1cclxuaW5wdXQ6Zm9jdXM6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXJcclxue1xyXG4gICAgICBjb2xvcjp0cmFuc3BhcmVudDtcclxufVxyXG4uYnRue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcclxuICAgIGJvcmRlci1jb2xvcjogIzAwMDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgZm9udC1zaXplOiAwLjdyZW07XHJcbiAgICBtYXJnaW4tdG9wOiA0dmg7XHJcbiAgICBwYWRkaW5nOiAxdmg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAwO1xyXG59XHJcbi5idG46Zm9jdXN7XHJcbiAgICBib3gtc2hhZG93OiBub25lO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgdHJhbnNpdGlvbjogbm9uZTsgXHJcbn1cclxuLmJ0bjpob3ZlcntcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5he1xyXG4gICAgY29sb3I6IGJsYWNrOyBcclxufVxyXG5hOmhvdmVye1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG59XHJcbiAjY29kZXtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBsZWZ0LCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMjUzKSAsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xODUpKSwgdXJsKFwiaHR0cHM6Ly9pbWcuaWNvbnM4LmNvbS9zbWFsbC8xNi8wMDAwMDAvbG9uZy1hcnJvdy1yaWdodC5wbmdcIik7XHJcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiA5NSU7XHJcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6IGNlbnRlcjtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["MatTableDataSource","i0","CarroComponent","constructor","route","detalleCompraService","_snackBar","authService","fotoService","compraService","productoService","ngOnInit","isLoggedIn$","subscribe","loggedIn","userData","JSON","parse","localStorage","getItem","userId","compradorId","obtenerDetalles","console","error","getDetalleVentaByCompradorId","response","detalleCompraList","map","detalle","nombreProducto","producto","nombrePro","tienda","local","nombreLo","subtotal","precioUnitario","cantidad","forEach","getFotosByProductoId","productoId","fotos","length","foto","data","dataSource","eliminarDetalle","Id","loading","deleteDetalleCompra","mensajeExito","open","duration","horizontalPosition","ngAfterViewInit","ejecutarCompra","detallesCompra","comprasPorLocalId","localId","push","Object","values","detallesPorLocal","compra","id","total","reduce","fecha","Date","detalles","undefined","getProducto","cantidadPro","updateProducto","log","window","location","reload","mostrarMensajeExito","calcularTotal","totalAPagar","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\54351\\Desktop\\Practica1\\Front\\src\\app\\components\\carro\\carro.component.ts","C:\\Users\\54351\\Desktop\\Practica1\\Front\\src\\app\\components\\carro\\carro.component.html"],"sourcesContent":["import { Component, OnInit, AfterViewInit } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { ActivatedRoute } from '@angular/router';\nimport { DetalleCompra } from 'src/app/interfaces/detalle-compra';\nimport { CompraService } from 'src/app/services/compra.service';\nimport { DetalleCompraService } from 'src/app/services/detalle-compra.service';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { FotoService } from 'src/app/services/foto.service';\nimport { Foto } from 'src/app/interfaces/foto';\nimport { Compra } from 'src/app/interfaces/compra';\nimport { ProductoService } from 'src/app/services/producto.service';\n\n@Component({\n  selector: 'app-carro',\n  templateUrl: './carro.component.html',\n  styleUrls: ['./carro.component.css']\n})\nexport class CarroComponent implements OnInit, AfterViewInit {\n  displayedColumns: string[] = ['imagen', 'nombreProducto', 'tienda', 'cantidadPro', 'subtotal', 'acciones'];\n  dataSource = new MatTableDataSource<DetalleCompra>();\n  loading: boolean = false;\n  detalleCompraList: DetalleCompra[] = [];\n  compradorId: string = '';\n  fotos: { [key: string]: Foto[] } = {};\n  totalAPagar: number = 0;\n  constructor(\n    private route: ActivatedRoute,\n    private detalleCompraService: DetalleCompraService,\n    private _snackBar: MatSnackBar,\n    private authService: AuthenticationService,\n    private fotoService: FotoService,\n    private compraService: CompraService,\n    private productoService: ProductoService,\n  ) {}\n\n  ngOnInit(): void {\n    this.authService.isLoggedIn$.subscribe((loggedIn) => {\n      if (loggedIn) {\n        const userData = JSON.parse(localStorage.getItem('userData') ?? '');\n        if (userData && userData.userId) {\n          this.compradorId = userData.userId;\n          this.obtenerDetalles();\n        } else {\n          console.error(\"No se encontró el ID del usuario en los datos del usuario almacenados en el localStorage.\");\n          // Aquí puedes manejar la situación en la que no se encuentra el ID del usuario\n        }\n      }\n    });\n  }\n  \n  obtenerDetalles() {\n    this.authService.isLoggedIn$.subscribe((loggedIn) => {\n        if (loggedIn) {\n            const userData = JSON.parse(localStorage.getItem('userData') ?? '');\n            this.compradorId = userData.userId ?? '';\n            this.detalleCompraService.getDetalleVentaByCompradorId(this.compradorId).subscribe(response => {\n                this.detalleCompraList = response.map(detalle => {\n                    return {\n                        ...detalle,\n                        nombreProducto: detalle.producto?.nombrePro,\n                        tienda: detalle.local?.nombreLo,\n                        subtotal: detalle.precioUnitario * detalle.cantidad\n                    };\n                });\n\n                // Obtener las fotos por productoId y asignarlas a cada detalle\n                this.detalleCompraList.forEach(detalle => {\n                    this.fotoService.getFotosByProductoId(detalle.productoId).subscribe(fotos => {\n                        if (fotos && fotos.length > 0) {\n                            detalle.foto = 'data:image/jpeg;base64,' + fotos[0].data;\n                        }\n                    });\n                });\n\n                this.dataSource.data = this.detalleCompraList;\n            });\n        }\n    });\n}\n\n  \n  eliminarDetalle(Id: number) {\n    this.loading = true;\n    this.detalleCompraService.deleteDetalleCompra(Id).subscribe(() => {\n      this.mensajeExito();\n      this.loading = false;\n      this.obtenerDetalles();\n    });\n  }\n\n  mensajeExito() {\n    this._snackBar.open('Producto Eliminado Exitosamente', '', {\n      duration: 1500,\n      horizontalPosition: 'right'\n    });\n  }\n\n  ngAfterViewInit() {}\n  ejecutarCompra() {\n    const detallesCompra = this.dataSource.data;\n    const comprasPorLocalId: { [key: number]: DetalleCompra[] } = {};\n  \n    detallesCompra.forEach(detalle => {\n      if (!(detalle.localId in comprasPorLocalId)) {\n        comprasPorLocalId[detalle.localId] = [];\n      }\n      comprasPorLocalId[detalle.localId].push(detalle);\n    });\n  \n    Object.values(comprasPorLocalId).forEach(detallesPorLocal => {\n      const localId = detallesPorLocal[0].localId;\n      const compra: Compra = {\n        id: 0,\n        total: detallesPorLocal.reduce((total, detalle) => total + detalle.subtotal, 0),\n        fecha: new Date(),\n        localId: localId,\n        compradorId: this.compradorId,\n        detalles: detallesPorLocal\n      };\n  \n      // Realizar la solicitud POST para ejecutar la compra\n      this.compraService.ejecutarCompra(compra).subscribe(() => {\n        // Una vez que la compra se haya ejecutado con éxito, eliminar los detalles de compra\n        detallesPorLocal.forEach(detalle => {\n          if (detalle.id !== undefined) { // Verificar si el id es definido antes de llamar a eliminarDetalle()\n            this.eliminarDetalle(detalle.id);\n  \n            // Restar la cantidad de detalleCompra a la cantidadPro del Producto\n            this.productoService.getProducto(+detalle.productoId).subscribe(producto => {\n              if (producto.id !== undefined) {\n                producto.cantidadPro -= detalle.cantidad;\n                this.productoService.updateProducto(producto.id, producto).subscribe(() => {\n                  console.log('Cantidad actualizada para el producto:', producto.nombrePro);\n                }, error => {\n                  console.error('Error al actualizar la cantidad del producto:', error);\n                });\n              } else {\n                console.error('El producto no tiene un ID definido.');\n              }\n            }, error => {\n              console.error('Error al obtener el producto:', error);\n            });\n          }\n        });\n        // Recargar la página después de eliminar los detalles de compra\n        window.location.reload();\n        // Manejar la respuesta o realizar alguna lógica adicional\n        // En este ejemplo, simplemente mostramos un mensaje de éxito\n        this.mostrarMensajeExito();\n      }, error => {\n        console.error('Error al ejecutar la compra:', error);\n        // Manejar errores\n      });\n    });\n  }\n\n\n  mostrarMensajeExito() {\n    this._snackBar.open('Compra realizada con éxito', '', {\n      duration: 2000,\n      horizontalPosition: 'right'\n    });\n  }\n  calcularTotal(): number {\n    this.totalAPagar = this.dataSource.data.reduce((total, detalle) => total + detalle.subtotal, 0);\n    return this.totalAPagar;\n  }\n}\n","<header>    \n   <app-navbar></app-navbar>\n</header>\n<div class=\"container\">\n    <div class=\"row border-top border-bottom\">\n        <div>\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z8\" matSort>\n                      <ng-container matColumnDef=\"imagen\">\n                        <th mat-header-cell *matHeaderCellDef> Imagen </th>\n                        <td mat-cell *matCellDef=\"let element\"> \n                            <img *ngIf=\"element.foto\" [src]=\"element.foto\" alt=\"Foto del producto\">\n                        </td>\n                    </ng-container>\n                      \n                        <ng-container matColumnDef=\"nombreProducto\">\n                            <th mat-header-cell *matHeaderCellDef> Nombre del Producto </th>\n                            <td mat-cell *matCellDef=\"let element\"> {{element.nombreProducto}} </td>\n                          </ng-container>\n                          \n                          <!-- Tienda Column -->\n                          <ng-container matColumnDef=\"tienda\">\n                            <th mat-header-cell *matHeaderCellDef> Tienda </th>\n                            <td mat-cell *matCellDef=\"let element\"> {{element.tienda}} </td>\n                          </ng-container>\n                      \n                        <!-- Cantidad Column -->\n                        <ng-container matColumnDef=\"cantidadPro\">\n                          <th mat-header-cell *matHeaderCellDef> Cantidad </th>\n                          <td mat-cell *matCellDef=\"let element\"> {{element.cantidad }} </td>\n                        </ng-container>\n                      \n                        <!-- Subtotal Column -->\n                        <ng-container matColumnDef=\"subtotal\">\n                          <th mat-header-cell *matHeaderCellDef> Subtotal </th>\n                          <td mat-cell *matCellDef=\"let element\"> {{element.subtotal}} </td>\n                        </ng-container>\n                      \n                        <!-- Acciones Column -->\n                        <ng-container matColumnDef=\"acciones\">\n                          <th mat-header-cell *matHeaderCellDef> Acciones </th>\n                          <td mat-cell *matCellDef=\"let element\">\n                            <button (click)=\"eliminarDetalle(element.id)\">Eliminar</button>\n                          </td>\n                        </ng-container>\n                      \n                        <!-- Define las columnas que se mostrarán y su orden -->\n                        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n                        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n                      \n                      </table>\n                      \n\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"summary\">\n        <div class=\"col-md-4 summary\" style=\"padding: 0;\">\n            <div><h2><b>Ticket</b></h2></div>\n            <hr>\n            <div class=\"row\" style=\"margin: 0;\">\n                <div class=\"col\" style=\"padding-left: 0;\">Contador Productos</div>\n            </div>\n            <form style=\"margin: 0;\">\n                <p>Forma de retiro</p>\n                <select style=\"width: 100%;\"><option class=\"text-muted\">Retiro en Tienda fisica</option><option class=\"text-muted\">Envio</option></select>\n                <p>Cuotas</p>\n                <select style=\"width: 100%;\"><option class=\"text-muted\">3</option><option class=\"text-muted\">6</option><option class=\"text-muted\">9</option><option class=\"text-muted\">12</option></select>\n            </form>\n            <div class=\"row\" style=\"border-top: 1px solid rgba(0,0,0,.1); padding: 2vh 0; margin: 0;\">\n              <div class=\"col\">TOTAL A PAGAR</div>\n              <div class=\"col text-right\">&euro; {{ calcularTotal() }}</div>\n            </div>\n            <!-- Botón para ejecutar la compra -->\n            <button class=\"btn\" style=\"width: 100%;\" (click)=\"ejecutarCompra()\">EJECUTAR COMPRA</button>\n          </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}